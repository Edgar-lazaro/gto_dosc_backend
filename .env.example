# Intranet runtime config
# Copy to .env and adjust values

# Server bind
HOST=0.0.0.0
PORT=3000

# Database
DATABASE_URL=postgresql://USER:PASSWORD@HOST:5432/DBNAME?schema=public

# Auth
JWT_SECRET=change-me
JWT_EXPIRES_IN=7d

# Swagger UI
SWAGGER_ENABLED=true

# CORS (enable only if you have a web frontend needing it)
CORS_ENABLED=false

# Helmet (security headers)
HELMET_DISABLED=false

# If running behind a reverse proxy, set true
TRUST_PROXY=false

# Max request body size (JSON/urlencoded)
BODY_LIMIT=10mb

# Optional: force a public base URL for building upload links
# Example: http://10.0.0.25:3000
PUBLIC_BASE_URL=

# Optional: force the full public base for uploads
# Default: ${PUBLIC_BASE_URL}/uploads (or http(s)://host/uploads)
# Example: http://10.0.0.25:3000/uploads
UPLOADS_BASE=

# Storage root folder to persist user-generated files.
# Recommended for "PC servidor": point to the Flutter repo's server_storage folder.
# Example (macOS/Linux): /Users/lazaro/Proyectos/gto_docs_v2_ad/server_storage
# Example (Windows): C:\\gto_docs_v2_ad\\server_storage
STORAGE_ROOT=

# Upload storage directory (use this to point to a NAS/NFS mount)
# Example: /mnt/gto_uploads
UPLOADS_DIR=

# Throttling (rate limit)
# Login throttling is enabled; tweak defaults here
THROTTLE_TTL_SECONDS=60
THROTTLE_LIMIT=10

# Active Directory (LDAP/LDAPS)
# When enabled, /api/auth/login will try local login first; if it fails, it will validate
# the credentials against AD and ONLY allow users that already exist in our DB (no auto-create).
AD_ENABLED=false

# Examples:
# AD_URL=ldap://dc01.empresa.local:389
# AD_URL=ldaps://dc01.empresa.local:636
AD_URL=

# Base DN for searching users (required if using service bind search)
AD_BASE_DN=

# Optional (recommended): service account to search user DN
AD_SERVICE_BIND_DN=
AD_SERVICE_BIND_PASSWORD=

# Optional direct bind methods (use ONE or more):
# - UPN suffix: user@empresa.local
AD_UPN_SUFFIX=
# - NetBIOS domain: EMPRESA\\user
AD_DOMAIN=
# - DN template: CN=%u,OU=Users,DC=empresa,DC=local
AD_BIND_DN_TEMPLATE=

# TLS settings for LDAPS (set false only if using self-signed certs in intranet)
AD_TLS_REJECT_UNAUTHORIZED=true

# Timeouts
AD_TIMEOUT_MS=8000
AD_CONNECT_TIMEOUT_MS=8000
